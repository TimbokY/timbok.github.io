import{bf as e,r as i,bp as R,bq as T,R as $,bh as k,br as E,bs as M,bt as N,bu as A,bi as D,bv as O,bw as x,bx as z,by as q,bz as H}from"./vendor-fW3smD4x.js";import{a as F,c as w,D as U,b as I,l as C}from"./index-BcS0l1QM.js";import{o as p,q as W,d as c,m as g,L as j,A as Y,b as v,r as L,t as _,u as S,v as u,M as B,w as m,R as G,n as J}from"./antd.bundle-CIKUiC3j.js";import{u as b}from"./index-_0Lhdygp.js";import{items as P}from"./index-BVpUTBGj.js";/* empty css              */import"./library.bundle-mtqYSBmT.js";import"./index-DCvgfadg.js";function X(){const n=()=>{w()};return e.jsx(p,{title:"碎碎念念",styles:{body:{padding:0}},children:e.jsx(W,{arrows:!0,autoplay:!0,autoplaySpeed:5e3,style:{backgroundColor:"#212529",color:"#fff"},afterChange:n,children:F.map((a,s)=>e.jsx("div",{children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"160px",padding:8,fontSize:16},children:a})},s))})})}function K(){const[{query:n}]=b("HomeObject","countdownDayList"),[a,s]=i.useState(new Date().toISOString()),[l,r]=i.useState(!1),[t,h]=i.useState([]);i.useEffect(()=>{r(!0),n().then(o=>{o&&h(o),r(!1)})},[]),i.useEffect(()=>{setInterval(()=>{s(c().format(U))},1e3)},[]);const f=o=>{const d=c(c(o).format(I)).diff(c(c(a).format(I)),"day");return d>0?`${d}天`:"就在今天"};return e.jsx(p,{title:"倒数日",children:e.jsx(g,{loading:l,children:e.jsx("div",{style:{overflowY:"scroll",maxHeight:190},children:t.map(o=>e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("span",{children:[e.jsxs("span",{style:{fontWeight:"bolder"},children:[o.title,"："]}),e.jsx("span",{className:"nes-text is-error",children:f(o.date)})]})},o.id))})})})}const Q=({icon:n,text:a})=>e.jsxs(v,{children:[$.createElement(n),a]});function V(){const[{query:n}]=b("DiaryObject","diaryList"),[a,s]=i.useState([]),[l,r]=i.useState(!1);return i.useEffect(()=>{r(!0),n().then(t=>{t&&s(t),r(!1)})},[]),e.jsx("div",{children:e.jsx(g,{loading:l,children:e.jsx(j,{bordered:!0,header:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",color:"#000000e0",fontWeight:"600",fontSize:16},children:e.jsx("span",{children:"记事本"})}),style:{backgroundColor:"#fff",border:"1px solid #f0f0f0"},dataSource:a,renderItem:t=>e.jsx(j.Item,{actions:[e.jsx("div",{children:e.jsx(Q,{icon:t.likeCount>0?R:T,text:t.likeCount},"list-vertical-like-o")},t.id)],children:e.jsx(j.Item.Meta,{avatar:e.jsx(Y,{style:{backgroundColor:t.createName==="hty"?"#722ed1":"#13c2c2"},children:t.createName}),title:t.title,description:e.jsxs("div",{children:[e.jsx("div",{children:t.content}),e.jsxs("div",{style:{marginTop:4},children:["创建人：",t.createName||"hty"]})]})})},t.title)})})})}function Z(){const[{query:n}]=b("HomeObject","calendarList"),[a,s]=i.useState(!1),[l,r]=i.useState([]);return i.useEffect(()=>{s(!0),n().then(t=>{t&&r(t),s(!1)})},[]),e.jsx(p,{title:"日历",children:e.jsx(g,{loading:a,children:e.jsx("div",{style:{overflowY:"scroll",maxHeight:190},children:l.map((t,h)=>e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(L,{status:c(t.date).diff(c(),"day")>=0?"processing":"default",text:`${t.date}：${t.record}`})},`li-${h}`))})})})}function ee(){return e.jsxs(v,{direction:"vertical",style:{width:"100%",padding:10},size:24,children:[e.jsx(X,{}),e.jsx(K,{}),e.jsx(Z,{}),e.jsx(V,{})]})}function se(){return e.jsx("div",{style:{padding:10},children:e.jsx(_,{items:P.map(n=>({id:n.id,dot:n.dot,children:e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontWeight:800},children:n.label}),e.jsx("div",{children:n.children})]})})),pending:"未完待续..."})})}function te(){const n=k(),a=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):{},s=document.getElementById("kyzxAudio"),[l,r]=i.useState(s.paused),t=i.useMemo(()=>`${100+c().diff(c("2024-02-23"),"day")/10}%`,[]),h=i.useMemo(()=>({together:c().diff(c("2023-12-30"),"day")}),[]),f=o=>{const{key:d}=o;switch(d){case"log":{n("/log");break}case"loginOut":{B.confirm({content:"确定退出吗？",onOk(){C("退出登录"),localStorage.setItem("isLogin","0"),n("/login")}});break}}};return e.jsxs("div",{className:"user",children:[e.jsxs("div",{className:"avatar",children:[e.jsx("i",{className:a.username==="hty"?"avtar-h":"avtar-y"}),e.jsx("div",{className:"right",children:e.jsxs(v,{direction:"vertical",style:{width:"100%"},children:[e.jsx("div",{className:"name",children:a.username==="hty"?":-)":"关你什么柿.🍅"}),e.jsxs("div",{children:["状态：",e.jsx(L,{status:"success",text:"在线"}),e.jsx("span",{style:{paddingLeft:4},onClick:()=>{var o,d;s!=null&&s.paused?(o=s==null?void 0:s.play)==null||o.call(s):(C("嫌吵，并且关闭了音乐~"),(d=s==null?void 0:s.pause)==null||d.call(s)),r(s==null?void 0:s.paused)},children:l?e.jsx(E,{}):e.jsx(M,{})})]}),e.jsxs("div",{children:[e.jsxs(S,{color:"#92cc41",children:["喜爱度: ",t]}),e.jsxs(S,{color:"#e76e55",children:["恋爱: ",h.together,"天"]})]})]})})]}),e.jsxs(u,{mode:"inline",selectable:!1,onClick:f,children:[e.jsx(u.Item,{icon:e.jsx(N,{}),children:"日志"},"log"),e.jsx(u.Item,{icon:e.jsx(A,{}),children:"退出"},"loginOut")]})]})}const y=({active:n,icon:a,text:s,onClick:l})=>e.jsxs(J,{flex:"auto",style:{textAlign:"center",color:n?"#57bb6b":""},onClick:l,children:[e.jsx("div",{style:{fontSize:16},children:a}),e.jsx("div",{style:{fontSize:12},children:s})]});function he(){const n=k(),a=D(),[s,l]=i.useState("home");i.useEffect(()=>{r(a.pathname.replace("/mobile/",""))},[]);const r=t=>{w(),l(t),n(t)};return e.jsxs(m,{style:{overflow:"hidden",width:"100vw",height:"100vh"},children:[e.jsx(m.Content,{style:{overflowY:"scroll",overflowX:"hidden"},children:e.jsxs(O,{children:[s==="home"&&e.jsx(x,{path:"home",element:e.jsx(ee,{})}),s==="dashboard"&&e.jsx(x,{path:"dashboard",element:e.jsx("div",{children:"暂无"})}),s==="history"&&e.jsx(x,{path:"history",element:e.jsx(se,{})}),s==="user"&&e.jsx(x,{path:"user",element:e.jsx(te,{})})]})}),e.jsx(m.Footer,{style:{padding:"6px 0px",backgroundColor:"#fff"},children:e.jsxs(G,{align:"middle",justify:"space-between",children:[e.jsx(y,{icon:e.jsx(z,{}),text:"首页",active:s==="home",onClick:()=>r("home")}),e.jsx(y,{icon:e.jsx(q,{}),text:"时间轴",active:s==="history",onClick:()=>r("history")}),e.jsx(y,{icon:e.jsx(H,{}),text:"我",active:s==="user",onClick:()=>r("user")})]})})]})}export{he as default};
