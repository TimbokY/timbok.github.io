import{r as o,bf as e,bh as q,bn as H,bo as P,a2 as G}from"./vendor-jmahd5-8.js";import{r as v,a as $,l as f,D as F,g as J,b as _,f as B,p as C,s as Q}from"./index-B6PE3ucE.js";import{F as I,d as c,S as Y,B as X,M as y,I as E,D as K,a as U,b as R,T as D,e as V,A as Z,Q as ee,s as S,f as se,l as te}from"./antd.bundle-P-JQ724I.js";import{u as W}from"./index-BAUKrt56.js";/* empty css              */import"./library.bundle-CqWacUqc.js";function ne(){const[a,d]=o.useState(v($.length)),n=()=>{d(s=>s+1>=$.length?0:s+1),f("碎碎念念-点击换一换")};return e.jsxs("div",{className:"nes-container is-dark with-title",children:[e.jsx("p",{className:"title",style:{backgroundColor:"#212529"},children:"碎碎念念"}),e.jsx("p",{children:e.jsx("span",{children:$[a]})}),e.jsx("p",{style:{textAlign:"right"},className:"animate__animated animate__pulse animate__infinite",onClick:()=>n(),children:"点击换一换"})]})}const ae={required:"这个必须给我写！"};function le(){const[a]=I.useForm(),[{query:d,save:n}]=W("HomeObject","countdownDayList"),[s,l]=o.useState(new Date().toISOString()),[m,h]=o.useState(!1),[j,x]=o.useState(!1),[g,N]=o.useState([]),p=o.useMemo(()=>{let r="";const i=c(`${c().format("YYYY-MM-DD")} 17:30:00`).diff(c(s),"second");if(i>0){const u=Math.floor(i/3600),k=Math.floor(i%3600/60),O=Math.floor(i%60);r=`${u?`${u}小时`:""}${k?`${k}分钟`:""}${O?`${O}秒`:""}`}return{afterWork:r}},[s]);o.useEffect(()=>{setInterval(()=>{l(c().format(F))},1e3)},[]),o.useEffect(()=>{x(!0),d().then(r=>{r&&N(r),x(!1)})},[]);const w=r=>{x(!0),n(r).then(()=>{x(!1),h(!1),a.resetFields()}).catch(()=>{x(!1)})},M=()=>{a.validateFields().then(r=>{const{title:t,date:i}=r,u=[...g,{id:J(),title:t,date:c(i).format(F)}];N(u),f("添加倒计时"),w(u)})},T=r=>{const t=c(c(r).format(_)).diff(c(c(s).format(_)),"day");return t>0?`${t}天`:"就在今天"},L=r=>{y.confirm({content:"确定删除吗？",onOk(){const t=g.filter(i=>r.id!==i.id);N(t),w(t)}})};return e.jsx(Y,{spinning:j,children:e.jsxs("section",{className:"showcase",style:{marginTop:24},children:[e.jsxs("section",{className:"nes-container",children:[e.jsxs("h3",{className:"title",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:"倒数日⏰"}),e.jsx("div",{onClick:()=>h(!0),children:"添加"})]}),e.jsx("div",{style:{fontSize:30,fontWeight:500},children:p.afterWork?e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:["还有",e.jsx("div",{style:{fontSize:40},className:"nes-text is-primary",children:p.afterWork}),e.jsx("span",{children:"下班"})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:["已经",e.jsx("div",{style:{fontSize:40},className:"nes-text is-success",children:"下班"}),"咯"]})}),e.jsxs("div",{children:["当前时间：",s]}),e.jsx("div",{style:{overflowY:"scroll",maxHeight:190},children:g.map(r=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{children:[e.jsxs("span",{style:{fontSize:20,fontWeight:"bolder"},children:[r.title,"："]}),e.jsx("span",{style:{fontSize:40},className:"nes-text is-error",children:T(r.date)})]}),e.jsx(X,{danger:!0,type:"text",onClick:()=>L(r),children:"删除"})]},r.id))})]}),e.jsx(y,{title:"添加倒计时",open:m,confirmLoading:j,onOk:M,onCancel:()=>h(!1),children:e.jsxs(I,{form:a,validateMessages:ae,children:[e.jsx(I.Item,{name:"title",label:"标题",rules:[{required:!0}],children:e.jsx(E,{})}),e.jsx(I.Item,{name:"date",label:"时间",rules:[{required:!0}],children:e.jsx(K,{disabledDate:r=>r<c().subtract(1,"day")})})]})})]})})}function ie(){const[a,d]=o.useState(""),[n,s]=o.useState(0),l=()=>{if(n>3){y.info({content:"你小子这么挑，问问男朋友吧~",onOk(){s(0)}});return}s(n+1);const m=setInterval(()=>{d(B[v(B.length)])},50);setTimeout(()=>{clearInterval(m)},1500),f("干饭")};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"showcase",style:{marginTop:24},children:e.jsxs("section",{className:"nes-container",children:[e.jsx("h3",{className:"title",children:"干饭🍚"}),e.jsxs("div",{className:"eat",children:[e.jsx("div",{style:{fontSize:30,marginBottom:12},children:a||"中午吃什么，吃什么？"}),e.jsx("button",{type:"button",className:"nes-btn is-warning",onClick:l,children:"开始"})]})]})})})}function ce(){const[a,d]=o.useState(""),n=()=>{const s=setInterval(()=>{d(`${C[v(C.length)]};${C[v(C.length)]};${C[v(C.length)]}`)},50);setTimeout(()=>{clearInterval(s)},1500),f("画画")};return e.jsx("section",{className:"showcase",style:{marginTop:24},children:e.jsxs("section",{className:"nes-container",children:[e.jsx("h3",{className:"title",children:"画画✍️"}),e.jsxs("div",{className:"eat",children:[e.jsx("div",{style:{fontSize:30,marginBottom:12},children:a||"想想画什么？"}),e.jsx("button",{type:"button",className:"nes-btn is-success",style:{color:"#212529"},onClick:n,children:"开始"})]})]})})}function oe(){const[a,d]=o.useState(localStorage.getItem("background-color")),n=l=>{d(l),Q(l.toRgbString())},s=l=>{f("换背景色"),localStorage.setItem("background-color",l.toRgbString())};return e.jsx(U,{presets:[{label:"预设颜色",colors:["#002FA7","#003152","#3e2431","#B05923","#900021","#FBD26A","#8F4B28","#01847F","#40E0D0","#81D8CF","#cce8cf","#faf9de","#fff2e2","#fde6e0","#e3edcd","#e9ebfe","#eaeaef","#6697c0","#78bacd","#dce5e6"]}],value:a,onChange:n,onChangeComplete:s,children:e.jsx("span",{style:{display:"flex",flex:"1"},children:"换个背景"})})}function re(){const a=q(),d=localStorage.getItem("background-color")||"",n=JSON.parse(localStorage.getItem("currentUser")),s=o.useMemo(()=>({together:c().diff(c("2023-12-30"),"day")}),[]),l=o.useMemo(()=>`${100+c().diff(c("2024-02-23"),"day")/10}%`,[]),m=()=>{y.confirm({content:"确定退出吗？",onOk(){f("退出登录"),localStorage.setItem("isLogin","0"),a("/login")}})},h=({key:x})=>{switch(x){case"changeBackground":break;case"logOut":{m();break}case"tea":{f("茶言茶语"),y.info({icon:"",title:"请扫二维码",width:280,closable:!0,maskClosable:!0,footer:null,content:e.jsx(ee,{value:`https://api.lovelive.tools/api/SweetNothings/1/Serialization/Text?genderType=${v(2)==="1"?"M":"F"}`})});break}case"log":{f("进入日志"),a("/log");break}}},j=[{key:"changeBackground",label:e.jsx(oe,{})},{key:"tea",label:e.jsx("span",{children:"茶言茶语"})},{key:"log",label:e.jsx("span",{children:"日志"})},{key:"logOut",label:e.jsx("span",{children:"退出"})}];return e.jsx("div",{className:"right-badge",children:e.jsxs(R,{wrap:!0,size:24,children:[e.jsx(D,{title:"🌙",color:d,children:e.jsxs("a",{className:"nes-badge is-icon",onClick:()=>{a("/diary"),f("进入月儿宝宝")},children:[e.jsx("span",{className:"is-dark",children:"hi"}),e.jsx("span",{className:"is-warning",children:"月儿宝宝"})]})}),e.jsx(D,{title:"✨✨",color:d,children:e.jsxs("a",{className:"nes-badge is-icon",onClick:()=>{a("/luckyStar"),f("进入福星")},children:[e.jsx("span",{className:"is-warning",children:e.jsx("i",{className:"nes-icon star is-small"})}),e.jsx("span",{className:"is-primary",children:"福星"})]})}),e.jsx(D,{title:"💯💯💯",color:d,children:e.jsxs("a",{className:"nes-badge is-splited",style:{width:120},onClick:()=>{f("点击喜爱度")},children:[e.jsx("span",{className:"is-dark",children:"喜爱度"}),e.jsx("span",{className:"is-success",children:l})]})}),e.jsx(D,{title:"💛💙💜❤️",color:d,children:e.jsxs("a",{className:"nes-badge is-splited",style:{width:120},onClick:()=>{a("/timeLine"),f("进入恋爱TimeLine")},children:[e.jsx("span",{className:"is-dark",children:"恋爱"}),e.jsxs("span",{className:"is-error",children:[s.together,"天"]})]})}),e.jsx(V,{arrow:!0,menu:{items:j,onClick:h},children:e.jsxs(R,{children:[e.jsx(Z,{size:"large",style:{backgroundColor:(n==null?void 0:n.username)==="hty"?"#722ed1":"#13c2c2"},icon:(n==null?void 0:n.username)==="hty"?e.jsx(H,{}):e.jsx(P,{})}),e.jsx("span",{style:{fontSize:16},children:n==null?void 0:n.username}),e.jsx(G,{})]})})]})})}function z({maxClicks:a=10,msg:d}){const[n,s]=o.useState(0),[l,m]=o.useState(!1),h=()=>{s(n+1),m(!0)};return o.useEffect(()=>{l&&n>=a&&(S.info(d||"连续点击了10次！"),s(0),m(!1))},[n,l]),[h,n,l]}function de(){const[a]=z({maxClicks:2,msg:"hty拍了拍yb的肚皮被弹飞"}),[d]=z({maxClicks:2,msg:"yb拍了拍hty的脸，并且亲了一口"}),n=[{left:"好喜欢好喜欢。",right:"我超超超超超超爱的。"},{left:"么么么么么么！",right:"亲亲亲亲亲亲！"}],s=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):{};return e.jsx("section",{className:"nes-container is-dark",style:{marginTop:24,padding:12},children:e.jsx("section",{className:"message-list",children:n.map((l,m)=>e.jsxs(o.Fragment,{children:[e.jsxs("section",{className:"message-left",children:[e.jsx("i",{className:s.username==="hty"?"avtar-y":"avtar-h",onClick:h=>{s.username==="hty"?(a(),h.detail===2&&f(`${s.username}拍了拍yb`)):(d(),h.detail===2&&f(`${s.username}拍了拍hty`))}}),e.jsx("div",{className:"nes-balloon from-left is-dark",children:e.jsx("p",{children:l.left})})]}),e.jsxs("section",{className:"message-right",children:[e.jsx("div",{className:"nes-balloon from-right is-dark",children:e.jsx("p",{onClick:l.onClick||(()=>{}),children:l.right})}),e.jsx("i",{className:s.username==="hty"?"avtar-h":"avtar-y",onClick:h=>{s.username==="hty"?(d(),h.detail===2&&f(`${s.username}拍了拍hty`)):(a(),h.detail===2&&f(`${s.username}拍了拍yb`))}})]})]},`message-${m}`))})})}let b=0,A="";function he(){const[{query:a,save:d}]=W("HomeObject","calendarList"),[n,s]=o.useState(c()),[l,m]=o.useState([]),[h,j]=o.useState(""),[x,g]=o.useState(!1),[N,p]=o.useState(!1);o.useEffect(()=>{g(!0),a().then(t=>{t&&m(t),g(!1)})},[]);const w=t=>{switch(S.destroy(),c(t).format("MM-DD")){case"10-05":S.info("生日快乐🎂");break;case"10-09":S.info("缘分的开始！");break;case"12-30":S.info("这天是纪念日哦！");break}},M=(t,{source:i})=>{i==="date"&&(w(t),b=b+1,b===1&&(A=t),b===2&&c(A).isSame(c(t))?(b=0,s(t),p(!0)):setTimeout(()=>{b=0},300))},T=()=>{const t=c(n).format("YYYY-MM-DD");let i=[];l.find(u=>u.date===t)?i=l.map(u=>u.date===t?{date:u.date,record:h}:u):i=[...l,{date:t,record:h}],i=i.sort((u,k)=>c(u.date).diff(c(k.date))),m(i),f("添加日历"),r(i)},L=t=>{y.confirm({content:"确定删除吗？",onOk(){const i=l.filter((u,k)=>k!==t);m(i),r(i)}})},r=t=>{g(!0),d(t).then(()=>{g(!1),p(!1),j("")}).catch(()=>{g(!1)})};return e.jsxs(Y,{spinning:x,children:[e.jsx("section",{className:"showcase",style:{marginTop:24},children:e.jsxs("section",{className:"nes-container",children:[e.jsxs("h3",{className:"title",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:"日历📅"}),e.jsx("div",{onClick:()=>s(c()),children:"返回今天"})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{width:300},children:e.jsx(se,{locale:te,fullscreen:!1,value:n,onChange:s,onSelect:M})}),l.length>0&&e.jsx("ul",{className:"nes-list is-disc",style:{minWidth:240,height:260,overflowY:"scroll",flex:1},children:l.map((t,i)=>e.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between","--color":c(t.date).diff(c(),"day")>=0?"#1677ff":"#d9d9d9"},children:[e.jsx("span",{style:{wordBreak:"break-all"},children:`${t.date}：${t.record}`}),e.jsx("span",{style:{color:"red",fontSize:24,paddingLeft:4},onClick:()=>L(i),children:"x"})]},`li-${i}`))})]})]})}),e.jsx(y,{title:"输入需要记录的事件",open:N,confirmLoading:x,onOk:T,onCancel:()=>p(!1),children:e.jsx(E.TextArea,{value:h,onChange:t=>j(t.target.value)})})]})}function ye(){return e.jsxs("div",{className:"home",children:[e.jsxs("div",{className:"content",children:[e.jsxs("div",{className:"left",children:[e.jsx(ne,{}),e.jsx(le,{}),e.jsx(ie,{}),e.jsx(ce,{})]}),e.jsxs("div",{className:"right",children:[e.jsx(re,{}),e.jsx(de,{}),e.jsx(he,{})]})]}),e.jsx("div",{className:"footer",children:`Copyright © 2024 - ${new Date().getFullYear()} 专属HTY All Rights Reserved.`})]})}export{ye as default};
